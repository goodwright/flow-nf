- name: "test_sw_demultiplex_singlesample"
  command: nextflow run ./tests/subworkflows/demultiplex -entry test_single_sample -c ./tests/config/nextflow.config
  tags:
    - "subworkflows"
    - "demultiplex"
  files:
    - path: "output/ultraplex/ultraplex_demux_Sample1.fastq.gz"
    - path: "output/ultraplex/ultraplex_demux_Sample2.fastq.gz"
      should_exist: false

- name: "test_sw_demultiplex_multisample"
  command: nextflow run ./tests/subworkflows/demultiplex -entry test_multi_sample -c ./tests/config/nextflow.config
  tags:
    - "subworkflows"
    - "demultiplex"
  files:
    - path: "output/ultraplex/ultraplex_demux_Sample1.fastq.gz"
    - path: "output/ultraplex/ultraplex_demux_Sample2.fastq.gz"

- name: "test_sw_demultiplex_withexcel"
  command: nextflow run ./tests/subworkflows/demultiplex -entry test_with_excel -c ./tests/config/nextflow.config
  tags:
    - "subworkflows"
    - "demultiplex"
  files:
    - path: "output/ultraplex/ultraplex_demux_Sample1.fastq.gz"
    - path: "output/ultraplex/ultraplex_demux_Sample2.fastq.gz"

- name: "test_sw_demultiplex_multisample_pairedend"
  command: nextflow run ./tests/subworkflows/demultiplex -entry test_multi_sample_paired_end -c ./tests/config/nextflow.config
  tags:
    - "subworkflows"
    - "demultiplex"
  files:
    - path: "output/ultraplex/ultraplex_demux_Sample1_Fwd.fastq.gz"
    - path: "output/ultraplex/ultraplex_demux_Sample1_Rev.fastq.gz"
    - path: "output/ultraplex/ultraplex_demux_Sample2_Fwd.fastq.gz"
    - path: "output/ultraplex/ultraplex_demux_Sample2_Rev.fastq.gz"

- name: "test_sw_demultiplex_adapter_mismatch"
  command: nextflow run ./tests/subworkflows/demultiplex -entry test_clip_adapter_mismatch -c ./tests/config/nextflow.config
  tags:
    - "subworkflows"
    - "demultiplex"
  exit_code: 1
